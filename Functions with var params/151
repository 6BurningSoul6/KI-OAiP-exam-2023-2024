/*
 Последовательность переменных различных типов.
 Перед каждой переменной находится целая переменная - идентификатор типа: 1-целое, 2-длинное целое, 3-вещественнное, 0-конец последовательности.
 Функция возвращает сумму значений параметров.
*/

#include <stdio.h>
#include <stdarg.h> // библиотека позволяет обробатывать переменное количевство переменных в функции

int sumVariables(int count, ...) { // в переменную count записываем сколько всего значений будет в функции
    va_list args; // грубо говря создается как бы массив с переменными фактически va_list выступает в данной роли как указатель.
    // !!!!!!но лучше в инете почитать!!!!!!!!!
    va_start(args, count); // в нее передается аргумент и как бы последний возможный
    int sum = 0; // сумма
    for (int i = 0; i < count; i = i + 2) { //цикл для чтения суммы
        int type = va_arg(args, int);  // читаем каждый второй элемент, по скольку в условии указано: перед элемнтом ставиться число 1-3
        // и от него зависит его тип ниже switch case для суммы данных аргументов
        switch (type) {
            case 1:
                sum += va_arg(args, int);
                break;
            case 2:
                sum += va_arg(args, long);
                break;
            case 3:
                sum += (int) va_arg(args, double);
                break;
            default:
                printf("Invalid type identifier: %d\n", type);
                break;
        }
    }
    va_end(args);

    return sum;
}

int main() {
    int result = sumVariables(7, 1, 10, 2, 20L, 3, 3.14, 1, 5);
    printf("Sum: %d\n", result);

    return 0;
}
